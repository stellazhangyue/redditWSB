# Data sources

To answer the 3 questions mentioned in Chapter 1 - Introduction, we need to collect the following data:

1. Stock related data: this data mainly contains the price and volume of the stocks that are discussed in r/wallstreetbets subreddit, which help to indicate the stock performance. This data can be found from [*Yahoo Finance*](https://finance.yahoo.com/), which provides financial news, data and commentary including stock quotes, press releases, financial reports, and original content.

2. Reddit related data: this data mainly contains the posts information in r/wallstreetbets subreddit, which helps to extract out the information about the stocks discussed and the post attitude. This data can be found from [*Reddit API*](https://www.reddit.com/dev/api/). Reddit API is the official portal Reddit created to facilitate developers in their app-building endeavors, where developers can retrieve the constantly updating feeds of Reddit posts.

3. Google search related data: this data mainly contains the website search ans news search information in Google. Since r/wallstreetbets subreddit, the heavily shorted stocks as well as the disagreement between retailer traders and professional traders were relatively new to the general public, we assume that they would actively search in Google to follow this event. Therefore, using Google search data can also serve as another indicator to show the public attention. This data can be found from [*Google Trends*](https://trends.google.com/trends/?geo=US). Google Trends is a website by Google that analyzes the popularity of top search queries in Google Search across various regions and languages. 


```{r}
top_10_tickers <- c('GME','AMC','BB','NOK','SND','NAKD','PLTR','CLOV','RETA','MAR','^GSPC')
get_price_df <- function(ticker) {
  GME_S <- getSymbols(ticker, src="yahoo", from = "2020-01-01", auto.assign = FALSE)
  gme_sp_df <- data.frame(Date=index(GME_S),coredata(GME_S))
  gme_sp_df <- gme_sp_df %>%
    select(Date, ends_with("Close"), ends_with("Volume")) %>%
    rename(Close = ends_with("Close")) %>%
    rename(Volume = ends_with("Volume"))
  gme_sp_df$Symbol = ticker
  gme_sp_df <- select(gme_sp_df, Symbol, Date, Close, Volume)
  return(gme_sp_df)
}
df_output = data.frame()
for(i in top_10_tickers) {
  tmp <- get_price_df(i)
  df_output <- rbind(df_output, tmp)
}
write.csv(df_output,'data/clean/stock/top_10_stocks_prices.csv',row.names=FALSE)
```

```{r}
get_price_df <- function(ticker) {
  df <- getSymbols(ticker, src="yahoo", from = "2020-01-01", auto.assign = FALSE)
  daily_return <- na.omit(periodReturn(df, period="daily", type = "arithmetic"))
  dat <- data.frame(date=index(daily_return), daily_return$daily.returns)
  dat$daily.returns <- dat$daily.returns * 100
  dat <- dat %>%
    rename(Daily_return = daily.returns, Date = date)
  dat$Symbol = ticker
  dat <- select(dat, Symbol, Date, Daily_return)
  return(dat)
}
df_output = data.frame()
for(i in top_10_tickers) {
  tmp <- get_price_df(i)
  df_output <- rbind(df_output, tmp)
}
write.csv(df_output,'data/clean/stock/top_10_stocks_daily_return.csv',row.names=FALSE)
```